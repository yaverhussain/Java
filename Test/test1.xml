<?xml version="1.0" encoding="UTF-8"?><document><configuration class="nz.co.touchpoint.touchpoint.task.feedback.interactiontrigger.FeedbackInvitationTriggerTaskConfiguration"><restart-from-initial-state>false</restart-from-initial-state><runtime-configuration/><notification-mode>1</notification-mode><notification-email>dao.yin@touchpoint.co.nz,notification@touchpoint.co.nz,james.liu@touchpoint.co.nz</notification-email><maximum-error>0</maximum-error><touchpoint-notification-email>dao.yin@touchpoint.co.nz,notification@touchpoint.co.nz,james.liu@touchpoint.co.nz</touchpoint-notification-email><allow-processing-multiple-interaction-batches>true</allow-processing-multiple-interaction-batches><interaction-entity-alpha-id>udc-interaction</interaction-entity-alpha-id><survey-alpha-id>udcoutsidein</survey-alpha-id><invitation-campaign-alpha-id>udcoutsidein</invitation-campaign-alpha-id><contact-match-mode>1</contact-match-mode><invitation-frequency-limit-mode>1</invitation-frequency-limit-mode><maximum-invitation-period-days>0</maximum-invitation-period-days><contact-match-attribute-alpha-id>email</contact-match-attribute-alpha-id><contact-feedback_invitation_date-attribute-alpha-id/><interaction-match-attribute-alpha-id>email</interaction-match-attribute-alpha-id><interaction-email-attribute-alpha-id>email</interaction-email-attribute-alpha-id><interaction-mobile-attribute-alpha-id/><start-campaign-response-state/><exclude-invalid-mobile-mode>P</exclude-invalid-mobile-mode><exclude-mobile-permission-mode>P</exclude-mobile-permission-mode><processing-phases><processing-phase class="nz.co.touchpoint.touchpoint.task.feedback.interactiontrigger.processingphase.configuration.phase.validation.ValidationPhaseConfiguration"><interaction-exclusion-rules class="nz.co.touchpoint.touchpoint.task.feedback.interactiontrigger.processingphase.configuration.phase.InteractionExclusionRules"><exclusion-rule column="i.feedback_request_mode" type="requiredfield"/><exclusion-rule column="i.interaction_date" type="requiredfield"/><exclusion-rule column="i.investor_number" type="requiredfield"/><exclusion-rule column="i.cm_udc_staff_no" type="requiredfield"/><exclusion-rule column="i.cm_staff_code" type="requiredfield"/><exclusion-rule column="i.cm_staff_name" type="requiredfield"/><exclusion-rule column="i.cm_staff_email" type="requiredfield"/><exclusion-rule column="i.cm_udc_region" type="requiredfield"/><exclusion-rule column="i.cm_udc_region_code" type="requiredfield"/><exclusion-rule column="i.rm_staff_udc_no" type="requiredfield"/><exclusion-rule column="i.rm_staff_code" type="requiredfield"/><exclusion-rule column="i.rm_staff_name" type="requiredfield"/><exclusion-rule column="i.rm_staff_email" type="requiredfield"/><exclusion-rule column="i.organisation_name" type="requiredfield"/><exclusion-rule column="i.import_batch_number" type="requiredfield"/><exclusion-rule><column-mappings class="nz.co.touchpoint.touchpoint.task.feedback.interactiontrigger.processingphase.configuration.model.ColumnMappings"><map column="i.exclusion_reason_type">'Incomplete Data'</map><map column="i.exclusion_reason">'Incomplete data for interaction mode'</map></column-mappings><conditions operator="AND"><condition is-composite-condition="false">LOWER (TRIM (feedback_request_mode)) = 'interaction' AND interaction_type IS NULL</condition></conditions></exclusion-rule><exclusion-rule><column-mappings class="nz.co.touchpoint.touchpoint.task.feedback.interactiontrigger.processingphase.configuration.model.ColumnMappings"><map column="i.exclusion_reason_type">'Incomplete Data'</map><map column="i.exclusion_reason">'Incomplete data for interaction mode'</map></column-mappings><conditions operator="AND"><condition is-composite-condition="false">LOWER (TRIM (feedback_request_mode)) = 'interaction' AND interaction_status IS NULL</condition></conditions></exclusion-rule><exclusion-rule><column-mappings class="nz.co.touchpoint.touchpoint.task.feedback.interactiontrigger.processingphase.configuration.model.ColumnMappings"><map column="i.exclusion_reason_type">'Incomplete Data'</map><map column="i.exclusion_reason">'Incomplete data for interaction mode'</map></column-mappings><conditions operator="AND"><condition is-composite-condition="false">LOWER (TRIM (feedback_request_mode)) = 'interaction' AND interaction_udc_staff_no IS NULL</condition></conditions></exclusion-rule><exclusion-rule><column-mappings class="nz.co.touchpoint.touchpoint.task.feedback.interactiontrigger.processingphase.configuration.model.ColumnMappings"><map column="i.exclusion_reason_type">'Incomplete Data'</map><map column="i.exclusion_reason">'Incomplete data for interaction mode'</map></column-mappings><conditions operator="AND"><condition is-composite-condition="false">LOWER (TRIM (feedback_request_mode)) = 'interaction' AND interaction_staff_code IS NULL</condition></conditions></exclusion-rule><exclusion-rule><column-mappings class="nz.co.touchpoint.touchpoint.task.feedback.interactiontrigger.processingphase.configuration.model.ColumnMappings"><map column="i.exclusion_reason_type">'Incomplete Data'</map><map column="i.exclusion_reason">'Incomplete data for interaction mode'</map></column-mappings><conditions operator="AND"><condition is-composite-condition="false">LOWER (TRIM (feedback_request_mode)) = 'interaction' AND interaction_staff_name IS NULL</condition></conditions></exclusion-rule><exclusion-rule><column-mappings class="nz.co.touchpoint.touchpoint.task.feedback.interactiontrigger.processingphase.configuration.model.ColumnMappings"><map column="i.exclusion_reason_type">'Incomplete Data'</map><map column="i.exclusion_reason">'Incomplete data for interaction mode'</map></column-mappings><conditions operator="AND"><condition is-composite-condition="false">LOWER (TRIM (feedback_request_mode)) = 'interaction' AND interaction_staff_email IS NULL</condition></conditions></exclusion-rule></interaction-exclusion-rules></processing-phase><processing-phase class="nz.co.touchpoint.touchpoint.task.feedback.interactiontrigger.processingphase.configuration.phase.interactionentitymapping.InteractionEntityMappingPhaseConfiguration"><interaction-exclusion-rules class="nz.co.touchpoint.touchpoint.task.feedback.interactiontrigger.processingphase.configuration.phase.InteractionExclusionRules"><exclusion-rule column="i.email" exclusion-reason-type="Not Contactable" type="requiredfield"/><exclusion-rule column="i.region" exclusion-reason-type="Not Contactable" type="requiredfield"/></interaction-exclusion-rules><interaction-entity-mapping class="nz.co.touchpoint.touchpoint.task.feedback.interactiontrigger.processingphase.configuration.phase.interactionentitymapping.InteractionEntityMapping"><column-mappings class="nz.co.touchpoint.touchpoint.task.feedback.interactiontrigger.processingphase.configuration.model.ColumnMappings"><map column="i.email">TRIM(LOWER (NVL (i.email_work, i.email_home)))</map><map column="i.region">CASE i.cm_udc_region_code WHEN '21' THEN 'Auckland' WHEN '31' THEN 'Auckland' WHEN '42' THEN 'Central' WHEN '22' THEN 'South' ELSE i.cm_udc_region END </map><map column="i.customer_search_key">i.investor_number</map><map column="i.feedback_request_channel">'Email'</map></column-mappings><entity-table-alias/><subquery-entity-table-alias/><entity-alpha-id>udc-interaction</entity-alpha-id><support-non-unique-mapping>false</support-non-unique-mapping></interaction-entity-mapping></processing-phase><processing-phase class="nz.co.touchpoint.touchpoint.task.feedback.interactiontrigger.processingphase.configuration.phase.interactioncontactmapping.InteractionContactMappingPhaseConfiguration"><interaction-exclusion-rules class="nz.co.touchpoint.touchpoint.task.feedback.interactiontrigger.processingphase.configuration.phase.InteractionExclusionRules"><exclusion-rule><column-mappings class="nz.co.touchpoint.touchpoint.task.feedback.interactiontrigger.processingphase.configuration.model.ColumnMappings"><map column="i.exclusion_reason_type">'Unable to Match Contact'</map><map column="i.exclusion_reason">'Unable to match consumer'</map></column-mappings><conditions operator="AND"><condition is-composite-condition="false">NVL(i.contact_id, 0) &lt;= 0</condition></conditions></exclusion-rule><exclusion-rule period="90" type="surveyinvite"/><exclusion-rule limit="4" period="365" type="surveyinvite"><conditions operator="AND"><condition is-composite-condition="false">NVL(i.contact_id, 0) = 0</condition></conditions></exclusion-rule><exclusion-rule period="150" type="surveycomplete"><conditions operator="AND"><condition is-composite-condition="false">NVL(i.contact_id, 0) &lt;= 0</condition></conditions></exclusion-rule></interaction-exclusion-rules><interaction-contact-mapping class="nz.co.touchpoint.touchpoint.task.feedback.interactiontrigger.processingphase.configuration.phase.interactioncontactmapping.InteractionContactMapping"><column-mappings class="nz.co.touchpoint.touchpoint.task.feedback.interactiontrigger.processingphase.configuration.model.ColumnMappings"><map column="c.name">i.contact_name</map><map column="cx.email">i.email</map><map column="cx.investor_number">i.investor_number</map><map column="cx.phone_number">i.phone</map><map column="cx.country">'New Zealand'</map><map column="cx.salutation">i.salutation</map></column-mappings><prioritised-invite-channel/></interaction-contact-mapping><interaction-contact-mapping-for-update/></processing-phase><processing-phase class="nz.co.touchpoint.touchpoint.task.feedback.interactiontrigger.processingphase.configuration.phase.interactioncampaigninsertion.InteractionCampaignInsertionPhaseConfiguration"><interaction-contact-mapping/><interaction-contact-mapping-for-update/><interaction-campaign-attribute-mapping class="nz.co.touchpoint.touchpoint.task.feedback.interactiontrigger.processingphase.configuration.phase.interactioncampaigninsertion.InteractionCampaignAttributeMapping"><column-mappings class="nz.co.touchpoint.touchpoint.task.feedback.interactiontrigger.processingphase.configuration.model.ColumnMappings"><map column="cmx.*">i.*</map></column-mappings></interaction-campaign-attribute-mapping><initial-campaign-state>Not Sent</initial-campaign-state></processing-phase></processing-phases></configuration></document>